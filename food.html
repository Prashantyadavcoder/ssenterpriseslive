<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Royal Indian Menu</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <style>
    body { background:#111; color:#fff; font-family:Poppins,sans-serif; }
    .menu-items{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;}
    .menu-item{background:#222;padding:20px;border-radius:10px;}
    .cart-container{position:fixed;bottom:20px;right:20px;}
    .cart-btn{background:#ff9f1c;color:#000;padding:15px 20px;border-radius:8px;cursor:pointer;font-weight:bold;}
    .hidden{display:none;}
    form{background:#181a1f;padding:20px;border-radius:10px;max-width:400px;margin:30px auto;}
    input,textarea{width:100%;padding:12px;margin:8px 0;border:none;border-radius:8px;background:#2a2e36;color:#fff;}
    button{padding:12px;width:100%;background:linear-gradient(90deg,#ff9f1c,#ff6b6b);border:none;border-radius:8px;font-weight:bold;cursor:pointer;}
  </style>
</head>
<body>
  <h1 style="text-align:center;">üç¥ The Royal Indian Menu</h1>

  <div class="menu-items" id="menu">
    <!-- JS se items add honge -->
  </div>

  <div class="cart-container">
    <div class="cart-btn" id="checkoutBtn">üõí Checkout (<span id="cartCount">0</span>)</div>
  </div>

  <!-- Checkout Form -->
  <div id="checkoutForm" class="hidden">
    <form action="order.php" method="POST">
      <h2>Your Details</h2>
      <input type="text" name="username" placeholder="Your Name" required>
      <input type="tel" name="phone" placeholder="Phone Number" required>
      <textarea name="order_text" id="orderText" readonly></textarea>
      <button type="submit">Place Order</button>
    </form>
  </div>

<script>
  const menuData = [
    {title:"KADAI PANEER",price:220},
    {title:"SHAHI PANEER",price:260},
    {title:"DAL FRY",price:140},
    {title:"VEG BIRYANI",price:180},
    {title:"GULAB JAMUN",price:70},
    {title:"COLD COFFEE",price:100}
  ];

  const menu = document.getElementById("menu");
  const cart = [];
  const cartCount = document.getElementById("cartCount");
  const checkoutBtn = document.getElementById("checkoutBtn");
  const checkoutForm = document.getElementById("checkoutForm");
  const orderText = document.getElementById("orderText");

  // Display Menu
  menuData.forEach(item=>{
    const div=document.createElement("div");
    div.className="menu-item";
    div.innerHTML=`
      <h3>${item.title}</h3>
      <p>‚Çπ${item.price}</p>
      <button onclick="addToCart('${item.title}',${item.price})">Add to Cart</button>
    `;
    menu.appendChild(div);
  });

  // Add to cart
  function addToCart(title,price){
    cart.push({title,price});
    cartCount.textContent=cart.length;
  }

  // Checkout
  checkoutBtn.addEventListener("click",()=>{
    if(cart.length===0){alert("Cart is empty!");return;}
    checkoutForm.classList.remove("hidden");
    let orderSummary="";
    cart.forEach((item,i)=>{orderSummary+=`${i+1}. ${item.title} - ‚Çπ${item.price}\n`;});
    orderText.value=orderSummary;
  });
</script>
  <?php
$servername = "localhost";
$username = "root";
$password = Prashantyadavcoder@9675  // apna MySQL password dalna
$dbname = "food_order_db";

// Connect
$conn = new mysqli($servername, $username, $password, $dbname);
if($conn->connect_error){ die("Connection failed: " . $conn->connect_error); }

$name = trim($_POST['username'] ?? '');
$phone = trim($_POST['phone'] ?? '');
$order = trim($_POST['order_text'] ?? '');

if($name==="" || $phone==="" || $order===""){
    echo "‚ùå Please fill all fields.";
    exit;
}

$stmt = $conn->prepare("INSERT INTO orders (username, phone, order_text) VALUES (?, ?, ?)");
$stmt->bind_param("sss", $name, $phone, $order);

if($stmt->execute()){
    echo "<h2 style='text-align:center;color:green;'>‚úÖ Order placed successfully!</h2>";
    echo "<p style='text-align:center;'><a href='index.php'>Place another order</a></p>";
}else{
    echo "Error: " . $stmt->error;
}

$stmt->close();
$conn->close();
?>

</body>
</html>
